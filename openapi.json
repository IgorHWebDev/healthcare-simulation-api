  {
  "openapi": "3.1.0",
  "info": {
    "title": "Healthcare Simulation API",
    "description": "API for healthcare simulation, patient analysis, and protocol validation with quantum-safe security and M3 optimization",
    "version": "0.2.0",
    "contact": {
      "name": "Healthcare Simulation Team",
      "url": "https://healthcare-simulation-api.onrender.com"
    }
  },
  "servers": [
    {
      "url": "https://healthcare-simulation-api.onrender.com",
      "description": "Production API Server"
    }
  ],
  "paths": {
    "/api/v1/healthcare/patients": {
      "post": {
        "summary": "Create Patient",
        "description": "Create a new patient record with comprehensive health data",
        "operationId": "create_patient",
        "tags": ["Patient Management"],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PatientCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Patient created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PatientResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/healthcare/analyze/{patient_id}": {
      "post": {
        "summary": "Analyze Patient",
        "description": "Perform comprehensive patient analysis using M3-optimized algorithms",
        "operationId": "analyze_patient",
        "tags": ["Patient Analysis"],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "parameters": [
          {
            "name": "patient_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "UUID of the patient"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AnalysisRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Analysis completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalysisResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Patient not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/healthcare/simulate": {
      "post": {
        "summary": "Simulate Healthcare Scenario",
        "description": "Simulate a healthcare scenario and get step-by-step guidance",
        "operationId": "simulate_scenario",
        "tags": ["Healthcare Simulation"],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SimulationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful simulation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SimulationResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/healthcare/validate": {
      "post": {
        "summary": "Validate Healthcare Protocol",
        "description": "Validate healthcare protocols against established guidelines",
        "operationId": "validate_protocol",
        "tags": ["Healthcare Simulation"],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ValidationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful validation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "PatientStatus": {
        "type": "string",
        "enum": ["◊ô◊¶◊ô◊ë", "◊ú◊ê ◊ô◊¶◊ô◊ë", "◊ß◊®◊ô◊ò◊ô"],
        "description": "Patient status in Hebrew"
      },
      "ProtocolType": {
        "type": "string",
        "enum": ["ACLS", "BLS", "PALS", "TRAUMA"],
        "description": "Type of medical protocol"
      },
      "VitalSigns": {
        "type": "object",
        "properties": {
          "‚ù§Ô∏è ◊ì◊ï◊§◊ß": {
            "type": "string",
            "description": "Heart rate"
          },
          "ü´Å ◊†◊©◊ô◊û◊ï◊™": {
            "type": "string",
            "description": "Respiratory rate"
          },
          "üå°Ô∏è ◊ó◊ï◊ù": {
            "type": "string",
            "description": "Temperature"
          },
          "‚ö° ◊ú◊ó◊• ◊ì◊ù": {
            "type": "string",
            "description": "Blood pressure"
          }
        }
      },
      "Action": {
        "type": "object",
        "required": ["action", "details"],
        "properties": {
          "action": {
            "type": "string",
            "description": "Action to be taken"
          },
          "details": {
            "type": "string",
            "description": "Detailed description of the action"
          },
          "references": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Reference materials"
          }
        }
      },
      "Step": {
        "type": "object",
        "required": ["step", "description", "actions"],
        "properties": {
          "step": {
            "type": "integer",
            "description": "Step number"
          },
          "description": {
            "type": "string",
            "description": "Step description"
          },
          "actions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Action"
            }
          }
        }
      },
      "SimulationRequest": {
        "type": "object",
        "required": ["title", "actors", "steps"],
        "properties": {
          "title": {
            "type": "string",
            "description": "Simulation scenario title"
          },
          "actors": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Participants in the simulation"
          },
          "steps": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Step"
            }
          }
        }
      },
      "NextStep": {
        "type": "object",
        "required": ["action", "protocol_reference", "expected_outcome"],
        "properties": {
          "action": {
            "type": "string",
            "description": "Next action to take"
          },
          "protocol_reference": {
            "type": "string",
            "description": "Reference to medical protocol"
          },
          "expected_outcome": {
            "type": "string",
            "description": "Expected outcome of the action"
          }
        }
      },
      "SimulationResponse": {
        "type": "object",
        "required": ["scenario_id", "current_state", "next_steps", "feedback"],
        "properties": {
          "scenario_id": {
            "type": "string",
            "description": "Unique identifier for the simulation"
          },
          "current_state": {
            "type": "object",
            "properties": {
              "patient_status": {
                "$ref": "#/components/schemas/PatientStatus"
              },
              "vital_signs": {
                "$ref": "#/components/schemas/VitalSigns"
              },
              "current_interventions": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            }
          },
          "next_steps": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/NextStep"
            }
          },
          "feedback": {
            "type": "object",
            "properties": {
              "correct_actions": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "suggestions": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "protocol_adherence": {
                "type": "number",
                "minimum": 0,
                "maximum": 100,
                "description": "Protocol adherence score"
              }
            }
          }
        }
      },
      "ValidationRequest": {
        "type": "object",
        "required": ["protocol_type", "actions"],
        "properties": {
          "protocol_type": {
            "$ref": "#/components/schemas/ProtocolType"
          },
          "actions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of actions to validate"
          },
          "patient_context": {
            "type": "object",
            "additionalProperties": true,
            "description": "Additional patient context"
          }
        }
      },
      "ValidationResponse": {
        "type": "object",
        "required": ["is_valid", "score"],
        "properties": {
          "is_valid": {
            "type": "boolean",
            "description": "Whether the protocol is valid"
          },
          "score": {
            "type": "number",
            "minimum": 0,
            "maximum": 100,
            "description": "Validation score"
          },
          "feedback": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "step": {
                  "type": "integer"
                },
                "action": {
                  "type": "string"
                },
                "is_correct": {
                  "type": "boolean"
                },
                "correction": {
                  "type": "string"
                }
              }
            }
          },
          "references": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "protocol": {
                  "type": "string"
                },
                "section": {
                  "type": "string"
                },
                "details": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "Error": {
        "type": "object",
        "required": ["code", "message"],
        "properties": {
          "code": {
            "type": "string",
            "description": "Error code"
          },
          "message": {
            "type": "string",
            "description": "Error message"
          }
        }
      },
      "PatientCreate": {
        "type": "object",
        "required": ["mrn", "first_name", "last_name", "date_of_birth", "age", "gender", "vital_signs"],
        "properties": {
          "mrn": {
            "type": "string",
            "description": "Medical Record Number"
          },
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "date_of_birth": {
            "type": "string",
            "format": "date"
          },
          "age": {
            "type": "integer",
            "minimum": 0
          },
          "gender": {
            "type": "string",
            "enum": ["male", "female", "other"]
          },
          "vital_signs": {
            "$ref": "#/components/schemas/VitalSigns"
          }
        }
      },
      "AnalysisRequest": {
        "type": "object",
        "required": ["patient_ids", "analysis_type"],
        "properties": {
          "patient_ids": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            }
          },
          "analysis_type": {
            "type": "string",
            "enum": ["risk_assessment", "treatment_response", "complication_prediction"]
          }
        }
      },
      "AnalysisResponse": {
        "type": "object",
        "required": ["status", "data"],
        "properties": {
          "status": {
            "type": "string",
            "enum": ["success", "error"]
          },
          "data": {
            "type": "object",
            "properties": {
              "analysis": {
                "type": "object",
                "properties": {
                  "summary": {
                    "type": "object",
                    "properties": {
                      "patient_id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "analysis_type": {
                        "type": "string"
                      },
                      "timestamp": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "confidence_score": {
                        "type": "string"
                      }
                    }
                  },
                  "predictions": {
                    "type": "object",
                    "properties": {
                      "risk_level": {
                        "type": "string",
                        "enum": ["low", "moderate", "high", "critical"]
                      },
                      "confidence": {
                        "type": "number",
                        "format": "float",
                        "minimum": 0,
                        "maximum": 1
                      },
                      "probability": {
                        "type": "number",
                        "format": "float",
                        "minimum": 0,
                        "maximum": 1
                      }
                    }
                  },
                  "risk_factors": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "factor": {
                          "type": "string"
                        },
                        "severity": {
                          "type": "string",
                          "enum": ["low", "medium", "high"]
                        }
                      }
                    }
                  },
                  "action_items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "action": {
                          "type": "string"
                        },
                        "priority": {
                          "type": "string",
                          "enum": ["low", "medium", "high"]
                        },
                        "status": {
                          "type": "string",
                          "enum": ["pending", "in_progress", "completed"]
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "PatientResponse": {
        "type": "object",
        "required": ["status", "data"],
        "properties": {
          "status": {
            "type": "string",
            "enum": ["success", "error"]
          },
          "data": {
            "type": "object",
            "properties": {
              "patient_id": {
                "type": "string",
                "format": "uuid"
              }
            }
          }
        }
      }
    },
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-Key"
      }
    }
  }
}