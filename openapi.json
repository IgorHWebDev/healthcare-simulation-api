{
  "openapi": "3.1.0",
  "info": {
    "title": "Healthcare Simulation API",
    "description": "API for healthcare simulation and protocol validation with quantum-safe security",
    "version": "0.1.0",
    "contact": {
      "name": "Healthcare Simulation Team",
      "url": "https://healthcare-simulation-api.onrender.com"
    }
  },
  "servers": [
    {
      "url": "https://healthcare-simulation-api.onrender.com",
      "description": "Production server"
    },
    {
      "url": "http://localhost:8000",
      "description": "Local development server"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "Check if the API is operational",
        "operationId": "health_check",
        "tags": ["System"],
        "responses": {
          "200": {
            "description": "API is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "ok"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v1/healthcare/simulate": {
      "post": {
        "summary": "Simulate Healthcare Scenario",
        "description": "Simulate a healthcare scenario and get step-by-step guidance",
        "operationId": "simulate_scenario",
        "tags": ["Healthcare Simulation"],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SimulationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful simulation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SimulationResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/v1/healthcare/validate": {
      "post": {
        "summary": "Validate Healthcare Protocol",
        "description": "Validate healthcare protocols against established guidelines",
        "operationId": "validate_protocol",
        "tags": ["Healthcare Simulation"],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ValidationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful validation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "PatientStatus": {
        "type": "string",
        "enum": ["◊ô◊¶◊ô◊ë", "◊ú◊ê ◊ô◊¶◊ô◊ë", "◊ß◊®◊ô◊ò◊ô"],
        "description": "Patient status in Hebrew"
      },
      "ProtocolType": {
        "type": "string",
        "enum": ["ACLS", "BLS", "PALS", "TRAUMA"],
        "description": "Type of medical protocol"
      },
      "VitalSigns": {
        "type": "object",
        "properties": {
          "‚ù§Ô∏è ◊ì◊ï◊§◊ß": {
            "type": "string",
            "description": "Heart rate"
          },
          "ü´Å ◊†◊©◊ô◊û◊ï◊™": {
            "type": "string",
            "description": "Respiratory rate"
          },
          "üå°Ô∏è ◊ó◊ï◊ù": {
            "type": "string",
            "description": "Temperature"
          },
          "‚ö° ◊ú◊ó◊• ◊ì◊ù": {
            "type": "string",
            "description": "Blood pressure"
          }
        }
      },
      "Action": {
        "type": "object",
        "required": ["action", "details"],
        "properties": {
          "action": {
            "type": "string",
            "description": "Action to be taken"
          },
          "details": {
            "type": "string",
            "description": "Detailed description of the action"
          },
          "references": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Reference materials"
          }
        }
      },
      "Step": {
        "type": "object",
        "required": ["step", "description", "actions"],
        "properties": {
          "step": {
            "type": "integer",
            "description": "Step number"
          },
          "description": {
            "type": "string",
            "description": "Step description"
          },
          "actions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Action"
            }
          }
        }
      },
      "SimulationRequest": {
        "type": "object",
        "required": ["title", "actors", "steps"],
        "properties": {
          "title": {
            "type": "string",
            "description": "Simulation scenario title"
          },
          "actors": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Participants in the simulation"
          },
          "steps": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Step"
            }
          }
        }
      },
      "NextStep": {
        "type": "object",
        "required": ["action", "protocol_reference", "expected_outcome"],
        "properties": {
          "action": {
            "type": "string",
            "description": "Next action to take"
          },
          "protocol_reference": {
            "type": "string",
            "description": "Reference to medical protocol"
          },
          "expected_outcome": {
            "type": "string",
            "description": "Expected outcome of the action"
          }
        }
      },
      "SimulationResponse": {
        "type": "object",
        "required": ["scenario_id", "current_state", "next_steps", "feedback"],
        "properties": {
          "scenario_id": {
            "type": "string",
            "description": "Unique identifier for the simulation"
          },
          "current_state": {
            "type": "object",
            "properties": {
              "patient_status": {
                "$ref": "#/components/schemas/PatientStatus"
              },
              "vital_signs": {
                "$ref": "#/components/schemas/VitalSigns"
              },
              "current_interventions": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            }
          },
          "next_steps": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/NextStep"
            }
          },
          "feedback": {
            "type": "object",
            "properties": {
              "correct_actions": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "suggestions": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "protocol_adherence": {
                "type": "number",
                "minimum": 0,
                "maximum": 100,
                "description": "Protocol adherence score"
              }
            }
          }
        }
      },
      "ValidationRequest": {
        "type": "object",
        "required": ["protocol_type", "actions"],
        "properties": {
          "protocol_type": {
            "$ref": "#/components/schemas/ProtocolType"
          },
          "actions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of actions to validate"
          },
          "patient_context": {
            "type": "object",
            "additionalProperties": true,
            "description": "Additional patient context"
          }
        }
      },
      "ValidationResponse": {
        "type": "object",
        "required": ["is_valid", "score"],
        "properties": {
          "is_valid": {
            "type": "boolean",
            "description": "Whether the protocol is valid"
          },
          "score": {
            "type": "number",
            "minimum": 0,
            "maximum": 100,
            "description": "Validation score"
          },
          "feedback": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "step": {
                  "type": "integer"
                },
                "action": {
                  "type": "string"
                },
                "is_correct": {
                  "type": "boolean"
                },
                "correction": {
                  "type": "string"
                }
              }
            }
          },
          "references": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "protocol": {
                  "type": "string"
                },
                "section": {
                  "type": "string"
                },
                "details": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "Error": {
        "type": "object",
        "required": ["code", "message"],
        "properties": {
          "code": {
            "type": "string",
            "description": "Error code"
          },
          "message": {
            "type": "string",
            "description": "Error message"
          }
        }
      }
    },
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-Key"
      }
    }
  }
} 